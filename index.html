<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Blossoms 2025-26 â€” The Enchanted Garden</title>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@300;500;600&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <style>
    :root{--bg1:#12103a;--bg2:#16082b}
    body {
      margin: 0;
      height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background: radial-gradient(circle at 10% 10%, #1a1540 0%, var(--bg1) 30%, var(--bg2) 100%);
      overflow: hidden;
      font-family: 'Poppins', sans-serif;
      color: #fff;
      text-align: center;
    }

    #stage {
  position: relative;
  width: 800px;
  height: 600px;    
  top: 100%;
  left: 50%;
  transform: translate(-50%, -100%);  
}

path {
  fill: none;
  stroke: green;
}

button {  
  border: 1px solid rgba(0,0,0,0.2);
  font-weight: bold;  
  box-shadow: 0 1px 4px 0 rgba(0, 0, 0, 0.37);  
  text-transform: uppercase;
  transition: all 0.5s ease;
  line-height: 1.6;
  padding: 8px 18px;
  background: #FFC107;
  color: #555;
  
  &:focus {
    outline: none;
  }
  
  &:hover {
    border: 1px solid rgba(0,0,0,0.5);
    color: #000;
  }
}

.hud {
  position: absolute;
  top: 0;
  left: 0;
  padding: 15px;
}


    h1 {
      font-family: 'Playfair Display', serif;
      font-size: 3.2rem;
      margin: 6px 0;
      opacity: 0;
      text-shadow: 0 0 20px rgba(200,150,255,0.25);
      letter-spacing: 1px;
    }

    p {
      font-size: 1.1rem;
      color: #d8ccff;
      opacity: 0;
      margin: 6px 0;
    }

    #logo {
      width: 170px;
      height: 170px;
      border-radius: 50%;
      margin: 18px 0;
      opacity: 0;
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.02), transparent 40%);
      box-shadow: 0 8px 40px rgba(160, 100, 255, 0.35), 0 0 90px rgba(120, 60, 200, 0.15) inset;
    }

    .btn {
      margin-top: 22px;
      background: linear-gradient(90deg, #8a2be2, #5d3fd3);
      color: white;
      padding: 12px 28px;
      border-radius: 28px;
      text-decoration: none;
      font-weight: 600;
      letter-spacing: 1px;
      box-shadow: 0 6px 30px rgba(100, 50, 200, 0.45);
      opacity: 0;
      transition: transform 0.25s ease;
    }
    .btn:hover{transform:translateY(-3px)}

    /* Gooey background blobs */
    .gooey{position:absolute;inset:0;z-index:-2;pointer-events:none}
    .blob{position:absolute;border-radius:50%;mix-blend-mode:screen;filter:blur(56px);opacity:0.9}
    #blob1{width:520px;height:520px;background:radial-gradient(circle,#9b59ff 0%, rgba(155,89,255,0.25) 40%, transparent 60%);left:-150px;top:-120px}
    #blob2{width:420px;height:420px;background:radial-gradient(circle,#6dd3ff 0%, rgba(109,211,255,0.18) 40%, transparent 60%);right:-120px;bottom:-160px}
    #blob3{width:360px;height:360px;background:radial-gradient(circle,#ff8bd6 0%, rgba(255,139,214,0.12) 40%, transparent 60%);left:10%;bottom:-200px}

    /* Flowers (improved) */
    .flowers-wrap{position:absolute;inset:0;pointer-events:none;z-index:-1}
    .flower-plate{position:absolute;width:260px;height:260px;display:flex;flex-direction:column;align-items:center;justify-content:center;opacity:0.95}
    .flower-plate img{width:160px;height:160px;filter:drop-shadow(0 8px 18px rgba(0,0,0,0.5));}

    .left-flowers{left:24px;bottom:30px;transform:scale(1);}
    .right-flowers{right:24px;top:30px;transform:scale(0.95) rotate(8deg);}

    /* multiple layered petals to give depth */
    .flower-plate .layer{position:absolute;width:220px;height:220px;border-radius:999px;opacity:0.12;mix-blend-mode:screen}
    .layer.one{background:radial-gradient(circle,#ffd1f8,transparent)}
    .layer.two{background:radial-gradient(circle,#e2a3ff,transparent);transform:scale(0.8);}
    .layer.three{background:radial-gradient(circle,#a3e8ff,transparent);transform:scale(0.6)}

    /* Petals */
    .petal{position:absolute;border-radius:50%;opacity:0.95;mix-blend-mode:screen}

    @media (max-width:640px){h1{font-size:2rem} #logo{width:140px;height:140px}}
  </style>
</head>
<body>
  <div class="gooey">
    <div class="blob" id="blob1"></div>
    <div class="blob" id="blob2"></div>
    <div class="blob" id="blob3"></div>
  </div>

  <div class="flowers-wrap" aria-hidden="true">
    <div class="flower-plate left-flowers" id="leftPlate">
      <div class="layer one"></div>
      <div class="layer two"></div>
      <div class="layer three"></div>
      <img src="Flower.gif" alt="flower group left">
    </div>

    <div class="flower-plate right-flowers" id="rightPlate">
      <div class="layer one"></div>
      <div class="layer two"></div>
      <div class="layer three"></div>
      <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f4/Cherry_blossom_icon.svg/1024px-Cherry_blossom_icon.svg.png" alt="flower group right">
    </div>
  </div>

  <h1>Blossoms 2025-26</h1>
  <p>Department of Computer Science - Team Onyx</p>

  <img id="logo" src="blossoms logo.png" alt="Blossoms logo">

  <p>Stay Tuned</p>
  <a class="btn" href="https://instagram.com/teamonyx_cs" target="_blank">Redirect to our Insta Page</a>
<div class="hud">
  <button id="rise">RISE UP</button>
</div>
<svg id="stage"></svg>
  <script>
    // Entry animations (GSAP 3 syntax is already correct here)
    gsap.fromTo('h1', {y:8, opacity:0}, {y:0, opacity:1, duration:1.2, ease:'power3.out'});
    gsap.fromTo('p', {y:8, opacity:0}, {y:0, opacity:1, duration:1.2, delay:0.6, stagger:0.25, ease:'power3.out'});
    gsap.fromTo('#logo', {scale:0.8, opacity:0, rotation: -6}, {scale:1, opacity:1, rotation:0, duration:1.6, delay:1.1, ease:'elastic.out(1,0.6)'});
    gsap.fromTo('.btn', {y:8, opacity:0}, {y:0, opacity:1, duration:1.0, delay:1.9, ease:'power2.out'});

    // Gooey blobs subtle motion
    gsap.to('#blob1', {x: 240, y: 160, duration: 12, repeat:-1, yoyo:true, ease:'sine.inOut'});
    gsap.to('#blob2', {x: -200, y: -120, duration: 14, repeat:-1, yoyo:true, ease:'sine.inOut'});
    gsap.to('#blob3', {x: 120, y: -180, duration: 16, repeat:-1, yoyo:true, ease:'sine.inOut'});

    // Flowers float subtle animation
    gsap.to('#leftPlate', {y: -18, rotation: -6, duration: 6, repeat: -1, yoyo: true, ease: 'sine.inOut'});
    gsap.to('#rightPlate', {y: 18, rotation: 6, duration: 7.5, repeat: -1, yoyo: true, ease: 'sine.inOut'});

    // Improved petals: multiple sizes, drifting paths
    const petalColors = ['#ffd1f8', '#e2a3ff', '#ffb6f9', '#c7f0ff'];
    function makePetal(){
      const p = document.createElement('div');
      p.className = 'petal';
      const size = 8 + Math.random()*18;
      p.style.width = p.style.height = size + 'px';
      p.style.left = Math.random()*100 + 'vw';
      p.style.top = -20 - Math.random()*10 + 'vh';
      p.style.background = `radial-gradient(circle at 30% 30%, ${petalColors[Math.floor(Math.random()*petalColors.length)]}, transparent 65%)`;
      p.style.opacity = 0.9 - Math.random()*0.5;
      document.body.appendChild(p);

      const duration = 6 + Math.random()*8;
      const driftX = (Math.random()-0.5) * 40;
      gsap.to(p, {y: '110vh', x: `+=${driftX}vw`, rotation: 360*Math.random(), duration: duration, ease:'power1.in', onComplete: ()=>p.remove()});
    }
    // spawn petals steadily
    let petalTimer = setInterval(makePetal, 400); // Use 'let' so it can be reassigned

    // stop petal generation if page hidden to save CPU
    document.addEventListener('visibilitychange', ()=>{
      if(document.hidden) {
        clearInterval(petalTimer);
      } else {
        petalTimer = setInterval(makePetal, 400); // Restart if visible
      }
    });

    console.clear();
    var log = console.log.bind(console);

    class Grass {

      constructor(path, offset, width, height, minHeight, maxHeight, maxAngle, startAngle) {

        this.path = path;    
        
        this.width    = random(4, 8);
        this.height_  = random(150, maxHeight); // Final height
        this.height   = 1; // Start height at 1
        this.maxAngle = random(10, maxAngle);
        this.angle    = Math.random() * randomSign() * startAngle * Math.PI / 180;    
        
        var offsetX = 1.5;
        
        // Start position
        var sx = offset / 2 + random(width - offset);
        var sy = height;   
        
        // Curvature
        var csx = sx - offsetX;
        var csy = sy - this.height / (Math.random() < 0.5 ? 1 : 2);

        // Parallel point
        var psx = csx;
        var psy = csy;
        
        var dx = sx + this.width;
        var dy = sy;

        this.coords  = [sx, sy, csx, csy, psx, psy, dx, dy];               
            
        this.morphed = false;
        
        this.start   = 0;
        this.elapsed = 0;
            
        var ambient = 0.85;
        
        var color = [
          Math.floor(random(16,  48)  * ambient),   
          Math.floor(random(100, 255) * ambient),
          Math.floor(random(16,  48)  * ambient)
        ];
        
        var w = this.width / 2;
        var d = `M${sx},${sy + 2},h${w},h${w}z`;
        
        // GSAP 3 Syntax: gsap.set
        gsap.set(path, { fill: `rgb(${color})`, attr: { d }});
      }
      
      rise() {
        
        this.morphed = true;
        this.elapsed = now() - this.start;

        // GSAP 3 Syntax: gsap.to, string for ease
        gsap.to(this, { 
          height: this.height_, 
          duration: random(2.5, 3.5), 
          ease: "power1.inOut" 
        });
      }
      
      // morph() function removed as it required a premium plugin
      
      update(time) {
                
        time -= this.elapsed;

        var coords = this.coords;
        var tip = Math.sin(time * 0.0007);

        var th = this.angle + Math.PI / 2 + tip * Math.PI / 180 * (this.maxAngle * Math.cos(time * 0.0002));
        
        // Calculate tip based on the current height (which is being tweened)
        var px = coords[0] + this.width  + this.height * Math.cos(th);
        var py = coords[1] - this.height * Math.sin(th);
                
        var d = `M${coords[0]},${coords[1]}`;    
        d += `C${coords[0]},${coords[1]},${coords[2]},${coords[3]},${px},${py}`;
        d += `C${px},${py},${coords[4]},${coords[5]},${coords[6]},${coords[7]}z`;
        
        // If not yet animated, call rise() to start the height tween
        if (!this.morphed) {
          this.rise();
          this.start = now();
        }
        
        // Always update the path attribute
        this.path.setAttribute("d", d);
      }
      
      destroy() {
        
        // GSAP 3 Syntax: gsap.killTweensOf
        gsap.killTweensOf(this);
        gsap.killTweensOf(this.path);
        
        this.path.parentElement.removeChild(this.path);
      }
    }

    var xmlns  = "http://www.w3.org/2000/svg";

    var perf   = window.performance;
    var now    = perf ? perf.now.bind(perf) : Date.now;

    var stage  = document.querySelector("#stage");
    var riseUp = document.querySelector("#rise");

    var start  = now();
    var blades = [];

    var offset = 400;
    var width  = 1200;
    var height = 600;
    var total  = 40;

    var minHeight  = 125;
    var maxHeight  = height * 0.8;
    var maxAngle   = 20;
    var startAngle = 40;

    // GSAP 3 Syntax: gsap.set
    gsap.set(stage, { width, height });

    riseUp.addEventListener("click", init);
    
    // GSAP 3 Syntax: gsap.ticker.add()
    gsap.ticker.add(render);

    init();

    function init() {

      blades.forEach(blade => blade.destroy());

      blades = [];

      for (var i = 0; i < total; i++) {  
        var path = createSVG("path", stage);
        blades[i] = new Grass(path, offset, width, height, minHeight, maxHeight, maxAngle, startAngle);
      }  
    }

    function render() {
      
      var elapsed = now() - start;
      
      if (!blades.length) return;
      
      for (var i = 0; i < total; i++) {
        blades[i].update(elapsed);
      } 
    }

    function createSVG(type, parent) {
      var node = document.createElementNS(xmlns, type);
      parent && parent.appendChild(node);
      return node;
    }

    function random(min, max) {
      if (max == null) {
        max = min;
        min = 0;
      }
      return min + Math.random() * (max - min);
    }

    function randomSign() {
      return Math.random() < 0.5 ? 1 : -1;
    }
  </script>
</body>
</html>
